"use strict";const frm=document.querySelector("#form-investir"),form={valor:document.querySelector("input[name=valor]"),plano:document.querySelector("select[name=plano]"),data:document.querySelector("select[name=data]"),aporte:document.querySelector("input[name=aporte]:checked")};function dados(){let e=formatFloat(form.valor.value),t=document.querySelector("input[name=aporte]:checked").value;return`valor=${e}&plano=${document.querySelector("select[name=plano]").value}&data=${document.querySelector("select[name=data]").value}&aporte=${t}`}function formatFloat(e){let t=e;return t=(t=(t=(t=t.replace("R$","")).replace(/s{1,}\./g,"")).replace(/\./g,"")).replace(",","."),t=parseFloat(t)}function formatMoney(){let e=formatFloat(form.valor.value),t=Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);valor.value=t}function validaInput(){let e=document.querySelectorAll("input"),t=document.querySelectorAll("select"),o=!0;return e.forEach(e=>{""!==e.value&&null!==e.value||(o=!1)}),t.forEach(e=>{""===e.value&&(o=!1)}),0==o&&alert("Preencha todos os campos!"),o}function limpa_campos(){let e=document.querySelectorAll("input"),t=document.querySelectorAll("select");e.forEach(e=>{e.value=""}),t.forEach(e=>{e.value=""})}function sendForm(e){e.preventDefault();const t=new XMLHttpRequest,o=frm.action,a=!0;return validaInput&&(t.open("POST",o,!0),t.onreadystatechange=(()=>{if(200==t.status&&4==t.readyState){let e=JSON.parse(t.responseText);"erro"==e.status&&(console.log(e.dados),a=!1),console.log(e.dados)}}),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(dados()),a&&limpa_campos()),!1}valor.addEventListener("blur",()=>{formatMoney()}),frm.addEventListener("submit",sendForm);